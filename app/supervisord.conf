; ==============================
; Configuraci√≥n de Supervisor
; ==============================
[supervisord]
nodaemon=true
; Archivos de logs y pidfile en carpeta con permisos de appuser
logfile=/app/supervisor/supervisord.log
pidfile=/app/supervisor/supervisord.pid

; ==============================
; Programa: Frontend React + PM2
; ==============================
[program:frontend]
; Levanta la SPA usando PM2 en cluster mode con todos los CPUs
; --no-daemon evita que PM2 termine inmediatamente
command=pm2 serve /app/dist 3000 --spa --name frontend --instances max --no-daemon

autostart=true
autorestart=true

; Archivos de logs del programa
stderr_logfile=/app/supervisor/frontend_err.log
stdout_logfile=/app/supervisor/frontend_out.log

; Usuario no-root
user=appuser
